{"ast":null,"code":"import _regeneratorRuntime from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from'axios';import React,{useState,useEffect,useRef}from'react';import toast from'react-hot-toast';import TaskItem from'../taskItem/TaskItem';import\"./tasks.css\";import{useGlobalContext}from'../../context/Context';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Tasks=function Tasks(){var _useGlobalContext=useGlobalContext(),editInfo=_useGlobalContext.editInfo;console.log(\"usecontext start here\");console.log(editInfo);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),newTask=_useState4[0],setNewTask=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),deleteTask=_useState6[0],setDeleteTask=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),toggle=_useState8[0],setToggle=_useState8[1];var ref=useRef(null);var getTasks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/tasks/mytask');case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setTasks(data);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getTasks(){return _ref.apply(this,arguments);};}();useEffect(function(){getTasks();console.log(tasks);},[newTask,toggle]);var hanleAddTodo=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){var newToDo;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();newToDo={title:e.target.newTask.value};console.log(newTask);_context2.prev=3;_context2.next=6;return axios.post('/api/tasks/',newToDo);case 6:setNewTask(newToDo);toast.success(\"Task adding completed\");ref.current.value=\"\";ref.current.focus();_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](3);console.log(_context2.t0);toast.error(\"cannot add task\");case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[3,12]]);}));return function hanleAddTodo(_x){return _ref2.apply(this,arguments);};}();/* {\n\n  This function use for delete task\n}*/var handleDeleteTask=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(taskId){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return axios.delete(\"/api/tasks/\".concat(taskId));case 3:// setDeleteTask(!deleteTask)\nsetTasks(tasks.filter(function(task){return task._id!==taskId;}));toast.success(\"task deleted\");_context3.next=11;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);toast.error('cannot add task');case 11:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);}));return function handleDeleteTask(_x2){return _ref3.apply(this,arguments);};}();var handleEditTask=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(e){var editValue;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;editValue={title:e.target.newTask.value,completed:false};_context4.next=4;return axios.put(\"/api/tasks/edit/\".concat(editInfo.id),editValue);case 4:toast.success(\"Update task content completed\");setToggle(!toggle);_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);toast.error('cannot add task');case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function handleEditTask(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"section\",{className:\"task\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"task-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"task-title\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"What's the Plan For Today\"})}),/*#__PURE__*/_jsx(\"form\",{onSubmit:editInfo.toggle?hanleAddTodo:handleEditTask,className:\"task-form\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"newtask\",className:\"task-newtask\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"task-input\",ref:ref,type:\"text\",name:\"newTask\",placeholder:editInfo.toggle?\"Add toDo\":editInfo.taskContent}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"task-form-button\",children:\"\".concat(editInfo.toggle?\"Add Todo\":\"Edit Todo\")})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"task-item\",children:/*#__PURE__*/_jsx(TaskItem,{props:{tasks:tasks,handleDeleteTask:handleDeleteTask}})})]})});};export default Tasks;","map":{"version":3,"names":["axios","React","useState","useEffect","useRef","toast","TaskItem","useGlobalContext","Tasks","editInfo","console","log","tasks","setTasks","newTask","setNewTask","deleteTask","setDeleteTask","toggle","setToggle","ref","getTasks","get","data","hanleAddTodo","e","preventDefault","newToDo","title","target","value","post","success","current","focus","error","handleDeleteTask","taskId","delete","filter","task","_id","handleEditTask","editValue","completed","put","id","taskContent"],"sources":["/home/steven/GITHUB/todo-app/frontend/src/component/tasks/Tasks.js"],"sourcesContent":["import axios from 'axios'\nimport React, {useState, useEffect, useRef} from 'react'\nimport toast from 'react-hot-toast'\nimport TaskItem from '../taskItem/TaskItem'\nimport \"./tasks.css\"\nimport { useGlobalContext } from '../../context/Context'\nconst Tasks = () => {\n  const { editInfo } = useGlobalContext()\n  console.log(\"usecontext start here\")\n  console.log(editInfo)\n\n  const [tasks, setTasks] = useState([])\n  const [newTask,setNewTask] = useState({})\n  const [deleteTask,setDeleteTask] = useState(false)\n  const [toggle,setToggle] = useState(false)\n\n\n  const ref = useRef(null);\n\n  const getTasks = async () =>{\n\n    try{\n      const {data} = await axios.get('/api/tasks/mytask')\n      setTasks(data)\n    }catch(err){\n      console.log(err)\n    }\n  }\n\n  useEffect(() => {\n\t\tgetTasks();\n\t\tconsole.log(tasks);\n  }, [newTask,toggle]);\n\n\n\nconst hanleAddTodo = async (e) => {\n  e.preventDefault()\n  const newToDo = {\n    title:e.target.newTask.value\n  } \n  console.log(newTask)\n  try{\n    await axios.post('/api/tasks/', newToDo);\n    setNewTask(newToDo);\n    toast.success(\"Task adding completed\")\n    \n    ref.current.value = \"\"\n    ref.current.focus()\n  }catch(err){\n    console.log(err);\n    toast.error(\"cannot add task\")\n  }\n};\n\n/* {\n\n  This function use for delete task\n}*/\nconst handleDeleteTask = async (taskId) => {\n  try{\n    await axios.delete(`/api/tasks/${taskId}`);\n    // setDeleteTask(!deleteTask)\n    setTasks(tasks.filter((task) => task._id !== taskId))\n    toast.success(\"task deleted\")\n  }catch(err){\n    console.log(err);\n\t  toast.error('cannot add task');\n  }\n}\n\n\n  \nconst handleEditTask = async (e) => {\n  try {\n    const editValue = {\n      title: e.target.newTask.value,\n      completed:false\n    }\n    await axios.put(`/api/tasks/edit/${editInfo.id}`, editValue)\n    toast.success(\"Update task content completed\")\n    setToggle(!toggle)\n  } catch(err) {\n    toast.error('cannot add task');\n  }\n}\n\n\n  return (\n\t\t<section className=\"task\">\n\t\t\t<div className=\"task-container\">\n\t\t\t\t<div className=\"task-title\">\n\t\t\t\t\t<h2>What's the Plan For Today</h2>\n\t\t\t\t</div>\n\t\t\t\t<form onSubmit={editInfo.toggle ? hanleAddTodo : handleEditTask} className=\"task-form\" >\n\t\t\t\t\t<label htmlFor=\"newtask\" className=\"task-newtask\">\n            <input\n              className='task-input'\n              ref={ref}\n              type=\"text\"\n              name=\"newTask\"\n              placeholder={ editInfo.toggle ? \"Add toDo\" : editInfo.taskContent}\n            />\n            <button type=\"submit\" className=\"task-form-button\">\n\t\t\t\t\t\t{`${editInfo.toggle ? \"Add Todo\":\"Edit Todo\"}`}\n\t\t\t\t\t</button>\n\t\t\t\t\t</label>\n\t\t\t\t\t\n\t\t\t\t</form>\n\t\t\t\t<div className=\"task-item\">\n\t\t\t\t\t<TaskItem props={{tasks, handleDeleteTask}} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n  );\n}\n\nexport default Tasks"],"mappings":"iYAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,EAAGC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAO,OAAO,CACxD,MAAOC,MAAK,KAAM,iBAAiB,CACnC,MAAOC,SAAQ,KAAM,sBAAsB,CAC3C,MAAO,aAAa,CACpB,OAASC,gBAAgB,KAAQ,uBAAuB,yFACxD,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,sBAAqBD,gBAAgB,EAAE,CAA/BE,QAAQ,mBAARA,QAAQ,CAChBC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC,CACpCD,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CAErB,cAA0BP,QAAQ,CAAC,EAAE,CAAC,wCAA/BU,KAAK,eAAEC,QAAQ,eACtB,eAA6BX,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAlCY,OAAO,eAACC,UAAU,eACzB,eAAmCb,QAAQ,CAAC,KAAK,CAAC,yCAA3Cc,UAAU,eAACC,aAAa,eAC/B,eAA2Bf,QAAQ,CAAC,KAAK,CAAC,yCAAnCgB,MAAM,eAACC,SAAS,eAGvB,GAAMC,IAAG,CAAGhB,MAAM,CAAC,IAAI,CAAC,CAExB,GAAMiB,SAAQ,4FAAG,qMAGQrB,MAAK,CAACsB,GAAG,CAAC,mBAAmB,CAAC,uCAA5CC,IAAI,kBAAJA,IAAI,CACXV,QAAQ,CAACU,IAAI,CAAC,gFAEdb,OAAO,CAACC,GAAG,aAAK,qEAEnB,kBARKU,SAAQ,0CAQb,CAEDlB,SAAS,CAAC,UAAM,CAChBkB,QAAQ,EAAE,CACVX,OAAO,CAACC,GAAG,CAACC,KAAK,CAAC,CAClB,CAAC,CAAE,CAACE,OAAO,CAACI,MAAM,CAAC,CAAC,CAItB,GAAMM,aAAY,6FAAG,kBAAOC,CAAC,oIAC3BA,CAAC,CAACC,cAAc,EAAE,CACZC,OAAO,CAAG,CACdC,KAAK,CAACH,CAAC,CAACI,MAAM,CAACf,OAAO,CAACgB,KACzB,CAAC,CACDpB,OAAO,CAACC,GAAG,CAACG,OAAO,CAAC,yCAEZd,MAAK,CAAC+B,IAAI,CAAC,aAAa,CAAEJ,OAAO,CAAC,QACxCZ,UAAU,CAACY,OAAO,CAAC,CACnBtB,KAAK,CAAC2B,OAAO,CAAC,uBAAuB,CAAC,CAEtCZ,GAAG,CAACa,OAAO,CAACH,KAAK,CAAG,EAAE,CACtBV,GAAG,CAACa,OAAO,CAACC,KAAK,EAAE,sFAEnBxB,OAAO,CAACC,GAAG,cAAK,CAChBN,KAAK,CAAC8B,KAAK,CAAC,iBAAiB,CAAC,wEAEjC,kBAjBKX,aAAY,6CAiBjB,CAED;AACA;AACA;AACA,GACA,GAAMY,iBAAgB,6FAAG,kBAAOC,MAAM,gKAE5BrC,MAAK,CAACsC,MAAM,sBAAeD,MAAM,EAAG,QAC1C;AACAxB,QAAQ,CAACD,KAAK,CAAC2B,MAAM,CAAC,SAACC,IAAI,QAAKA,KAAI,CAACC,GAAG,GAAKJ,MAAM,GAAC,CAAC,CACrDhC,KAAK,CAAC2B,OAAO,CAAC,cAAc,CAAC,oFAE7BtB,OAAO,CAACC,GAAG,cAAK,CACjBN,KAAK,CAAC8B,KAAK,CAAC,iBAAiB,CAAC,CAAC,sEAEjC,kBAVKC,iBAAgB,8CAUrB,CAID,GAAMM,eAAc,6FAAG,kBAAOjB,CAAC,uJAErBkB,SAAS,CAAG,CAChBf,KAAK,CAAEH,CAAC,CAACI,MAAM,CAACf,OAAO,CAACgB,KAAK,CAC7Bc,SAAS,CAAC,KACZ,CAAC,wBACK5C,MAAK,CAAC6C,GAAG,2BAAoBpC,QAAQ,CAACqC,EAAE,EAAIH,SAAS,CAAC,QAC5DtC,KAAK,CAAC2B,OAAO,CAAC,+BAA+B,CAAC,CAC9Cb,SAAS,CAAC,CAACD,MAAM,CAAC,oFAElBb,KAAK,CAAC8B,KAAK,CAAC,iBAAiB,CAAC,CAAC,sEAElC,kBAZKO,eAAc,8CAYnB,CAGC,mBACA,gBAAS,SAAS,CAAC,MAAM,uBACxB,aAAK,SAAS,CAAC,gBAAgB,wBAC9B,YAAK,SAAS,CAAC,YAAY,uBAC1B,iDAAkC,EAC7B,cACN,aAAM,QAAQ,CAAEjC,QAAQ,CAACS,MAAM,CAAGM,YAAY,CAAGkB,cAAe,CAAC,SAAS,CAAC,WAAW,uBACrF,eAAO,OAAO,CAAC,SAAS,CAAC,SAAS,CAAC,cAAc,wBAC1C,cACE,SAAS,CAAC,YAAY,CACtB,GAAG,CAAEtB,GAAI,CACT,IAAI,CAAC,MAAM,CACX,IAAI,CAAC,SAAS,CACd,WAAW,CAAGX,QAAQ,CAACS,MAAM,CAAG,UAAU,CAAGT,QAAQ,CAACsC,WAAY,EAClE,cACF,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,kBAAkB,oBACpDtC,QAAQ,CAACS,MAAM,CAAG,UAAU,CAAC,WAAW,GACpC,GACD,EAEF,cACP,YAAK,SAAS,CAAC,WAAW,uBACzB,KAAC,QAAQ,EAAC,KAAK,CAAE,CAACN,KAAK,CAALA,KAAK,CAAEwB,gBAAgB,CAAhBA,gBAAgB,CAAE,EAAG,EACzC,GACD,EACG,CAEZ,CAAC,CAED,cAAe5B,MAAK"},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/steven/GITHUB/todo-app/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import\"./navbar.css\";import{useState,useEffect,useRef}from'react';import axios from'axios';import toast from'react-hot-toast';import{useNavigate}from'react-router-dom';import{Link}from'react-router-dom';import{FaUserAlt,FaTimes}from'react-icons/fa';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var navRef=useRef();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),showNav=_useState4[0],setShowNav=_useState4[1];var getUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userInfo;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/users/me');case 3:userInfo=_context.sent;console.log(userInfo.data);setUser(userInfo.data);_context.next=12;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);toast.error(\"cannot get User Info\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function getUser(){return _ref.apply(this,arguments);};}();var handleLogout=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.post(\"/api/authen/logout\");case 3:navigate('/auth');_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);toast.error(\"Logout fail\");case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleLogout(){return _ref2.apply(this,arguments);};}();useEffect(function(){getUser();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container grid\",ref:navRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"nav-logo\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"TO-DO APP\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(showNav?'nav-userinfo':'nav-userinfo-responsive'),children:[/*#__PURE__*/_jsx(\"p\",{className:\"nav-user-icon\",children:/*#__PURE__*/_jsx(FaUserAlt,{})}),/*#__PURE__*/_jsx(\"p\",{className:\"nav-username\",children:user.name}),/*#__PURE__*/_jsx(Link,{to:\"/edit-profile\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"nav-button edit\",children:\"Edit Profile\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"nav-button logout\",onClick:handleLogout,children:\"Logout\"}),/*#__PURE__*/_jsx(\"button\",{className:\"nac-btn-close\",onClick:function onClick(){return setShowNav(true);},children:/*#__PURE__*/_jsx(FaTimes,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"nav-btn-open\",children:/*#__PURE__*/_jsx(\"i\",{class:\"bx bx-menu\",onClick:function onClick(){return setShowNav(false);}})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","toast","useNavigate","Link","FaUserAlt","FaTimes","Navbar","navRef","navigate","user","setUser","showNav","setShowNav","getUser","get","userInfo","console","log","data","error","handleLogout","post","name"],"sources":["/home/steven/GITHUB/todo-app/frontend/src/component/navbar/Navbar.jsx"],"sourcesContent":["import React from 'react'\nimport \"./navbar.css\"\nimport {useState,useEffect,useRef} from 'react'\nimport axios from 'axios'\nimport toast from 'react-hot-toast'\nimport { useNavigate } from 'react-router-dom'\nimport { Link } from 'react-router-dom'\nimport { FaUserAlt, FaTimes } from 'react-icons/fa';\n\n\nconst Navbar = () => {\n  const navRef = useRef()\n  const navigate = useNavigate()\n  const [user, setUser] = useState({})\n  const [showNav,setShowNav] = useState(true)\n  \n\n  const getUser = async () =>{\n    try{\n      const userInfo = await axios.get('/api/users/me');\n      console.log(userInfo.data)\n      setUser(userInfo.data);\n    }catch (err){\n      console.log(err)\n      toast.error(\"cannot get User Info\")\n    }\n    \n  }\n  \n  const handleLogout =  async () => {\n    try{\n      await axios.post(\"/api/authen/logout\")\n      navigate('/auth')\n    } catch(err){\n      toast.error(\"Logout fail\")\n    }\n  }\n\n  useEffect(()=>{\n    getUser()\n  },[])\n\n\n  return (\n\t\t<div className=\"nav-container grid\" ref={navRef}>\n\t\t\t<div className=\"nav-logo\">\n\t\t\t\t<h2>TO-DO APP</h2>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclassName={`${\n\t\t\t\t\tshowNav ? 'nav-userinfo' : 'nav-userinfo-responsive'\n\t\t\t\t}`}\n\t\t\t>\n\t\t\t\t<p className=\"nav-user-icon\">\n\t\t\t\t\t<FaUserAlt />\n\t\t\t\t</p>\n\t\t\t\t<p className=\"nav-username\">{user.name}</p>\n\t\t\t\t<Link to=\"/edit-profile\">\n\t\t\t\t\t<button type=\"button\" className=\"nav-button edit\">\n\t\t\t\t\t\tEdit Profile\n\t\t\t\t\t</button>\n\t\t\t\t</Link>\n\t\t\t\t<button\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tclassName=\"nav-button logout\"\n\t\t\t\t\tonClick={handleLogout}\n\t\t\t\t>\n\t\t\t\t\tLogout\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tclassName=\"nac-btn-close\"\n\t\t\t\t\tonClick={() => setShowNav(true)}\n\t\t\t\t>\n\t\t\t\t\t<FaTimes />\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<div className=\"nav-btn-open\">\n\t\t\t\t<i class=\"bx bx-menu\" onClick={() => setShowNav(false)}></i>\n\t\t\t</div>\n\t\t</div>\n  );\n}\n\nexport default Navbar"],"mappings":"iYAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,MAAO,cAAc,CACrB,OAAQC,QAAQ,CAACC,SAAS,CAACC,MAAM,KAAO,OAAO,CAC/C,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,MAAK,KAAM,iBAAiB,CACnC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,IAAI,KAAQ,kBAAkB,CACvC,OAASC,SAAS,CAAEC,OAAO,KAAQ,gBAAgB,CAAC,wFAGpD,GAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,CACnB,GAAMC,OAAM,CAAGR,MAAM,EAAE,CACvB,GAAMS,SAAQ,CAAGN,WAAW,EAAE,CAC9B,cAAwBL,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA7BY,IAAI,eAAEC,OAAO,eACpB,eAA6Bb,QAAQ,CAAC,IAAI,CAAC,yCAApCc,OAAO,eAACC,UAAU,eAGzB,GAAMC,QAAO,4FAAG,wLAEWb,MAAK,CAACc,GAAG,CAAC,eAAe,CAAC,QAA3CC,QAAQ,eACdC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC,CAC1BR,OAAO,CAACK,QAAQ,CAACG,IAAI,CAAC,CAAC,+EAEvBF,OAAO,CAACC,GAAG,aAAK,CAChBhB,KAAK,CAACkB,KAAK,CAAC,sBAAsB,CAAC,qEAGtC,kBAVKN,QAAO,0CAUZ,CAED,GAAMO,aAAY,6FAAI,kLAEZpB,MAAK,CAACqB,IAAI,CAAC,oBAAoB,CAAC,QACtCb,QAAQ,CAAC,OAAO,CAAC,mFAEjBP,KAAK,CAACkB,KAAK,CAAC,aAAa,CAAC,sEAE7B,kBAPKC,aAAY,2CAOjB,CAEDtB,SAAS,CAAC,UAAI,CACZe,OAAO,EAAE,CACX,CAAC,CAAC,EAAE,CAAC,CAGL,mBACA,aAAK,SAAS,CAAC,oBAAoB,CAAC,GAAG,CAAEN,MAAO,wBAC/C,YAAK,SAAS,CAAC,UAAU,uBACxB,iCAAkB,EACb,cACN,aACC,SAAS,WACRI,OAAO,CAAG,cAAc,CAAG,yBAAyB,CAClD,wBAEH,UAAG,SAAS,CAAC,eAAe,uBAC3B,KAAC,SAAS,IAAG,EACV,cACJ,UAAG,SAAS,CAAC,cAAc,UAAEF,IAAI,CAACa,IAAI,EAAK,cAC3C,KAAC,IAAI,EAAC,EAAE,CAAC,eAAe,uBACvB,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,iBAAiB,0BAExC,EACH,cACP,eACC,IAAI,CAAC,QAAQ,CACb,SAAS,CAAC,mBAAmB,CAC7B,OAAO,CAAEF,YAAa,oBAGd,cACT,eACC,SAAS,CAAC,eAAe,CACzB,OAAO,CAAE,yBAAMR,WAAU,CAAC,IAAI,CAAC,EAAC,uBAEhC,KAAC,OAAO,IAAG,EACH,GACJ,cACN,YAAK,SAAS,CAAC,cAAc,uBAC5B,UAAG,KAAK,CAAC,YAAY,CAAC,OAAO,CAAE,yBAAMA,WAAU,CAAC,KAAK,CAAC,EAAC,EAAK,EACvD,GACD,CAER,CAAC,CAED,cAAeN,OAAM"},"metadata":{},"sourceType":"module"}